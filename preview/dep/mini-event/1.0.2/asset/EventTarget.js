/*! @2015 Leo Wang. All Rights Reserved */
define("mini-event/EventTarget",["require","./lib","./Event","./EventQueue"],function(require){function e(){}var n=require("./lib"),t=require("./Event"),r=require("./EventQueue");return e.prototype.on=function(e,t,i,o){if(!this.miniEventPool)this.miniEventPool={};if(!this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e]=new r;var a=this.miniEventPool[e];if(o=n.extend({},o),i)o.thisObject=i;a.add(t,o)},e.prototype.once=function(e,t,r,i){i=n.extend({},i),i.once=!0,this.on(e,t,r,i)},e.prototype.un=function(e,n,t){if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var r=this.miniEventPool[e];r.remove(n,t)}},e.prototype.fire=function(e,n){if(1===arguments.length&&"object"==typeof e)n=e,e=n.type;if(!e)throw new Error("No event type specified");if("*"===e)throw new Error("Cannot fire global event");var r=n instanceof t?n:new t(e,n);r.target=this;var i=this["on"+e];if("function"==typeof i)i.call(this,r);if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var o=this.miniEventPool[e];o.execute(r,this)}if(this.miniEventPool&&this.miniEventPool.hasOwnProperty("*")){var a=this.miniEventPool["*"];a.execute(r,this)}return r},e.prototype.destroyEvents=function(){if(this.miniEventPool){for(var e in this.miniEventPool)if(this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e].dispose();this.miniEventPool=null}},e.enable=function(t){t.miniEventPool={},n.extend(t,e.prototype)},e});