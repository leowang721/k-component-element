/*! @2015 Leo Wang. All Rights Reserved */
define("emc/Model",["require","eoo","mini-event/EventTarget"],function(require){var e={},t={silent:!0},exports={};exports.constructor=function(e){if(this.store={},e)this.fill(e,t)},exports.get=function(e){if(!this.store)throw new Error("This model is disposed");if(!e)throw new Error("Argument name is not provided");return this.store.hasOwnProperty(e)?this.store[e]:void 0},exports.set=function(t,n,r){if(!this.store)throw new Error("This model is disposed");if(!t)throw new Error("Argument name is not provided");if(arguments.length<2)throw new Error("Argument value is not provided");r=r||e;var i=this.store.hasOwnProperty(t)?"change":"add",o=this.store[t];if(this.store[t]=n,o!==n&&!r.silent){var a={name:t,oldValue:o,newValue:n,changeType:i};this.fire("change",a),this.fire("change:"+t,a)}},exports.fill=function(e,t){if(!this.store)throw new Error("This model is disposed");if(!e)throw new Error("Argument extension is not provided");for(var n in e)if(e.hasOwnProperty(n))this.set(n,e[n],t)},exports.remove=function(t,n){if(!this.store)throw new Error("This model is disposed");if(!t)throw new Error("Argument name is not provided");if(!this.store.hasOwnProperty(t))return void 0;n=n||e;var r=this.store[t];if(delete this.store[t],!n.silent){var i={name:t,changeType:"remove",oldValue:r,newValue:void 0};this.fire("change",i),this.fire("change:"+t,i)}},exports.getAsModel=function(e){var t=this.get(e);if(!t||"[object Object]"!=={}.toString.call(t))return new n;else return new n(t)},exports.dump=function(){var e={};for(var t in this.store)if(this.store.hasOwnProperty(t))e[t]=this.store[t];return e},exports.has=function(e){if(!e)throw new Error("Argument name is not provided");if(!this.store)return!1;else return this.store.hasOwnProperty(e)},exports.hasValue=function(e){if(!e)throw new Error("Argument name is not provided");if(!this.store)return!1;else return this.has(e)&&null!=this.store[e]},exports.hasReadableValue=function(e){if(!e)throw new Error("Argument name is not provided");if(!this.store)return!1;else return this.hasValue(e)&&""!==this.store[e]},exports.clone=function(){if(!this.store)throw new Error("This model is disposed");return new n(this.store)},exports.dispose=function(){this.destroyEvents(),this.store=null};var n=require("eoo").create(require("mini-event/EventTarget"),exports);return n});