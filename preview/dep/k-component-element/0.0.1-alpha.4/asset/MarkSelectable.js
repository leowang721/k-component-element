/*! @2015 Leo Wang. All Rights Reserved */
define("k-component-element/MarkSelectable",["require","k-component/component!k-component-element/mark-selectable","eoo","./MarkAction"],function(require){require("k-component/component!k-component-element/mark-selectable");var e={initialize:function(){this.$super(arguments),this.selection=this.el.attr("selection")||"*",this.multi=null!=this.el.attr("multi"),this.disabled=null!=this.el.attr("disabled"),this.host[0].selection=this,this.$(this.getSelected()).addClass("selected")},bindEvents:function(){var e=this;e.$host.on("mousedown",e.selection,function(t){if(t.target!==e.host)e.select(t.target)})},select:function(e){var t=this;if(e=t.$(e),!t.disabled)if(t.multi){if(null!=e.attr("selected"))e.attr("selected",null).removeClass("selected");else e.attr("selected","").addClass("selected");t.$(t.host).trigger("select")}else if(null==e.attr("selected"))t.$(t.getSelected()).attr("selected",null).removeClass("selected"),e.attr("selected","").addClass("selected"),t.$(t.host).trigger("select")},attributes:{multi:function(e){this.set("multi",null!=e)},disabled:function(e){this.set("disabled",null!=e)}},getSelection:function(){return this.$(this.host).find(this.selection)},getSelected:function(){var e=this.getSelection().filter("[selected]");return this.multi?e:e[0]},dispose:function(){this.$super(arguments)}},t=require("eoo").create(require("./MarkAction"),e);return t});