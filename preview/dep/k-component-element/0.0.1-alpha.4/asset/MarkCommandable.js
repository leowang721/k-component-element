/*! @2015 Leo Wang. All Rights Reserved */
define("k-component-element/MarkCommandable",["require","lodash","k-component/component!k-component-element/mark-commandable","fc-core/oo","./MarkAction"],function(require){var e=require("lodash");require("k-component/component!k-component-element/mark-commandable");var t={supportedEvent:["click","mousedown","mouseup","mouseover","mouseout"],initialize:function(){this.$super(arguments),this.type=e.trim(this.el.attr("event-type"))||"mousedown",this.handler=e.bind(this.executeCommand,this)},bindEvents:function(){var t=this;if(-1!==e.indexOf(t.supportedEvent,t.type))t.$host.on(t.type,t.handler)},unbindEvents:function(){var e=this;e.$host.off(e.type,e.handler)},attributes:{"event-type":function(t){var n=this;n.unbindEvents(),n.type=e.trim(t)||"mousedown",n.bindEvents()}},executeCommand:function(t){var n=this.$(t.target),r=n.attr("data-command"),i=n.attr("data-command-args"),o=n.attr("data-command-trigger");if(null!=r||!o||e.trim(o)===this.type){try{i=JSON.parse(i)}catch(t){}this.host.trigger("command",{command:r,args:i}),this.host.triggerHandler("command:"+r,i),t.preventDefault()}},dispose:function(){var e=this;e.unbindEvents(),this.$super(arguments)}},n=require("fc-core/oo").derive(require("./MarkAction"),t);return n});