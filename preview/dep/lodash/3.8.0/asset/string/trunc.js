/*! @2015 Leo Wang. All Rights Reserved */
define("lodash/string/trunc",["../internal/baseToString","../internal/isIterateeCall","../lang/isObject","../lang/isRegExp"],function(e,n,t,r){function i(i,l,c){if(c&&n(i,l,c))l=null;var f=o,s=a;if(null!=l)if(t(l)){var h="separator"in l?l.separator:h;f="length"in l?+l.length||0:f,s="omission"in l?e(l.omission):s}else f=+l||0;if(i=e(i),f>=i.length)return i;var d=f-s.length;if(1>d)return s;var p=i.slice(0,d);if(null==h)return p+s;if(r(h)){if(i.slice(d).search(h)){var v,g,m=i.slice(0,d);if(!h.global)h=RegExp(h.source,(u.exec(h)||"")+"g");for(h.lastIndex=0;v=h.exec(m);)g=v.index;p=p.slice(0,null==g?d:g)}}else if(i.indexOf(h,d)!=d){var y=p.lastIndexOf(h);if(y>-1)p=p.slice(0,y)}return p+s}var o=30,a="...",u=/\w*$/;return i});