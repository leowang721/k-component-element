/*! @2015 Leo Wang. All Rights Reserved */
void function(e,n){e("promise/enhance",["require","./util"],function(require){function e(e){return"function"==typeof a.getThen(e)}function t(e){var t=!1,r=new this(function(r){n.require(e,function(){!t&&r([].slice.call(arguments))})});return r.abort=function(){t=!0},r}function r(e){var n=this.constructor;return this.then(function(t){n.resolve(e()).then(function(){return t})},function(t){n.resolve(e()).then(function(){throw t})})}function i(n,t,r){try{r=[].slice.call(arguments,2);var i=n.apply(t,r);return e(i)?i:this.resolve(i)}catch(o){return this.reject(o)}}function o(e){if(e&&"object"==typeof e&&e.constructor===this)return e;else return new this(function(n){n(e)})}var a=require("./util");return function(n){return n.isPromise=e,n.require=t,n.invoke=i,n.cast=o,n.prototype["finally"]=r,n.prototype.ensure=r,n.prototype.fail=n.prototype["catch"],n}})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)},this);