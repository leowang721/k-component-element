/*! @2015 Leo Wang. All Rights Reserved */
void function(e){e("promise/setImmediate",["require","./util"],function(require){function e(e){return r[i]=e,i++}function n(e){var n=r[e];if(n)delete r[e],n()}var t=function(){return this}(),r={},i=1;if("function"==typeof t.setImmediate)return require("./util").bind(t.setImmediate,t);if("function"==typeof t.nextTick)return t.nextTick;if(t.MutationObserver||t.webKitMutationObserver){var o="data-promise-tick",a=t.MutationObserver||t.webKitMutationObserver,u=function(e,t){var r=e[0];if(r.attributeName===o){var i=r.target.getAttribute(o);n(i),t.disconnect(r.target)}};return function(n){var t=document.createElement("div"),r=new a(u);r.observe(t,{attributes:!0});var i=e(n);t.setAttribute(o,i)}}if("function"==typeof postMessage&&"function"!=typeof t.importScript){var l=!0,c=t.onmessage;if(t.onmessage=function(){l=!1},t.postMessage("","*"),t.onmessage=c,l){var f="promise-tick-",s=function(e){if(e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(f)){var r=e.data.substring(f.length);n(r)}};if(t.addEventListener)t.addEventListener("message",s,!1);else t.attachEvent("onmessage",s);return function(n){var r=e(n);t.postMessage(f+r,"*")}}}if(t.MessageChannel){var h=new MessageChannel;return h.port1.onmessage=function(e){var t=e.data;n(t)},function(n){var t=e(n);h.port2.postMessage(t)}}if("onreadystatechange"in document.createElement("script")){var p=document.documentElement;return function(e){var n=document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,p.removeChild(n),n=null},p.appendChild(n)}}return function(e){setTimeout(e,0)}})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)},this);